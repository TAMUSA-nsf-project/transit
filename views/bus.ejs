<%- include('layout/header.ejs') %>
    <!-- Custom script tags here... -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="javascript" src="/socket.io/socket.io.js"></script>
    <!-- <script>
    const socket = io();
</script> -->
    <script type="module">
        import { io } from "https://cdn.socket.io/4.4.1/socket.io.esm.min.js";

        const socket = io();
        // socket.emit("hello", "world", (response) => {
        //     console.log(response); // "got it"
        //     socket.emit('busConnection')
        // });
        socket.on('busConnection', busses => {
            navigator.geolocation.watchPosition(pos => {
                const lat = pos.coords.latitude
                const long = pos.coords.longitude
                socket.emit('update', { lat, long })
                // console.log(pos)
            })
        })

    </script>
    <script src="js/bus.js"></script>


    </head>

    <body>
        <%- include('layout/nav.ejs') %>

            <!-- Page goes here -->
            <div id="intro" class="bg-image shadow-2-strong">
                <!-- <img src="img/dsBuffer.jpg" alt="shutterstock_627370652.jpg"> -->
                <!-- <img src="img/39584_white-bus-on-road-near-in-high-rise-building.jpeg" class="img-fluid" alt="shutterstock_627370652.jpg"> -->
                <img src="img/shutterstock_627370652.jpg" class="img-fluid" alt="shutterstock_627370652.jpg">
                <!-- <img src="img/shutterstock_145981052.jpg" class="img-fluid" alt="shutterstock_627370652.jpg"> -->

                <div class="mask" style="background-color: rgba(0, 0, 0, 0.2);">
                    <div id='root'></div>
                    <div class="container text-align-center">
                        <h3>Welcome, Bus Driver! Please authorize location...</h3>

                    </div>
                </div>
            </div>

            <%- include('layout/footer.ejs') %>